(this["webpackJsonpbattleship-react"]=this["webpackJsonpbattleship-react"]||[]).push([[0],[,,,,,function(e,a,t){e.exports={tile:"GameTile_tile__2V0fi","tile-hover":"GameTile_tile-hover__27pCl","tile-occupied":"GameTile_tile-occupied__2L1Kz","tile-hidden-free":"GameTile_tile-hidden-free__1YNW9","tile-hit":"GameTile_tile-hit__3Blcv","tile-revealed":"GameTile_tile-revealed__3HRYw"}},function(e,a,t){e.exports={"legend-container":"Legend_legend-container__2wkJE","legend-tile":"Legend_legend-tile__2IZZF","legend-text":"Legend_legend-text__2G7dO","legend-entry":"Legend_legend-entry__3pAhb"}},,function(e,a,t){e.exports={"game-status":"Gamestatus_game-status__17qnU","status-contaienr":"Gamestatus_status-contaienr__5kGFG","reset-button":"Gamestatus_reset-button__Z03MH"}},,,,,,function(e,a,t){e.exports={"title-text":"Header_title-text__AxQNR"}},function(e,a,t){e.exports={"board-container":"Gameboard_board-container__3_TPw"}},function(e,a,t){e.exports={"gameboard-container":"Game_gameboard-container__NZmrM"}},,,,,function(e,a,t){},,,,,,function(e,a,t){},function(e,a,t){"use strict";t.r(a),t.d(a,"store",(function(){return de}));var r,n,o=t(0),c=t.n(o),d=t(7),i=t.n(d),l=(t(21),t(14)),s=t.n(l),p=t(1),b=function(){return Object(p.jsx)("header",{children:Object(p.jsx)("h1",{className:s.a["title-text"],children:"Battleship"})})},y=t(15),u=t.n(y),j=t(4),O=t(3),h=t(5),_=t.n(h),g=t(2),f=0,S=1,x=2,m=3,E=4,A=5,v=0,T=1,N=2,G=3,I=4,R={player1:f,player2:f,gameStatus:v,player1Score:0,player2Score:0},L=function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PLAYER_STATE":return Object(g.a)(Object(g.a)({},a),{},Object(O.a)({},t.payload.player,t.payload.state));case"START_GAME":return Object(g.a)(Object(g.a)({},a),{},{player1:x,player2:m,gameStatus:T});case"SWAP_TURNS":return Object(g.a)(Object(g.a)({},a),{},{player1:a.player2,player2:a.player1,gameStatus:a.gameStatus===T?N:T});case"RESET_GAME":return Object(g.a)(Object(g.a)({},a),{},{player1:R.player1,player2:R.player2,gameStatus:R.gameStatus});case"GAME_OVER":var r="player1"===t.payload.player?"player2":"player1";return Object(g.a)(Object(g.a)({},a),{},(e={},Object(O.a)(e,r,A),Object(O.a)(e,t.payload.player,E),Object(O.a)(e,r+"Score",a[r+"Score"]+1),Object(O.a)(e,"gameStatus","player1"===r?G:I),e));case"INC_PLAYER_SCORE":return Object(g.a)(Object(g.a)({},a),{},Object(O.a)({},t.payload.player+"Score",a[t.payload.player+"Score"]+1));default:return a}},C="0",D="R",M="B",P="H",z="X",H=(r={},Object(O.a)(r,M,_.a["tile-occupied"]),Object(O.a)(r,C,_.a["tile-hidden-free"]),Object(O.a)(r,P,_.a["tile-hover"]),Object(O.a)(r,z,_.a["tile-hit"]),Object(O.a)(r,D,_.a["tile-revealed"]),r),w=function(e){var a=e.tileIndex,t=e.boardNum,r=e.boardSize,n=e.player,o=e.playerState,c=e.hidden,d=e.type,i=e.oppType,l=Object(j.d)((function(e){return e.boards[t][a]})),s=Object(j.c)(),b=function(){var e=de.getState(),a="board1"===t?"board2":"board1",r=e.boards[a].map((function(e,a){return e===C||e===M?a:-1}));r=r.filter((function(e){return-1!==e}));var n=Math.floor(Math.random()*r.length);s({type:"REVEAL_TILE",payload:{board:a,index:r[n]}}),e=de.getState(),V(e.boards[a])&&s({type:"GAME_OVER",payload:{player:a}}),s({type:"SWAP_TURNS"})},y=function(e){var r=de.getState();switch(o){case f:var c=r.boards[t+"ShipIndex"],p=r.boards.shipArray[c].length;k(a,r.boards.shipDir,p,r.boards[t])&&s({type:"CHANGE_ADJ_TILES",payload:{index:a,length:p,tileContent:M,board:t,isPlacing:!0}}),(r=de.getState()).boards[t+"ShipIndex"]>=r.boards.shipArray.length&&(s({type:"CHANGE_PLAYER_STATE",payload:{player:n,state:S}}),(r=de.getState()).players.player1===r.players.player2&&r.players.player1===S&&s({type:"START_GAME"}));break;case m:if(l===D||l===z||"computer"===i)return;s({type:"REVEAL_TILE",payload:{board:t,index:a}});var y=de.getState();V(y.boards[t])?s({type:"GAME_OVER",payload:{player:n}}):(s({type:"SWAP_TURNS"}),"computer"===d&&setTimeout(b,1e3));break;default:return}},u=function(){var e=de.getState();if(o===f){var r=e.boards[t+"ShipIndex"],n=e.boards.shipArray[r].length;k(a,e.boards.shipDir,n,e.boards[t])&&s({type:"CHANGE_ADJ_TILES",payload:{index:a,length:n,tileContent:P,board:t,isPlacing:!1}})}},O=function(){var e=de.getState();if(o===f){var r=e.boards[t+"ShipIndex"],n=e.boards.shipArray[r].length;k(a,e.boards.shipDir,n,e.boards[t])&&s({type:"CHANGE_ADJ_TILES",payload:{index:a,length:n,tileContent:C,board:t,isPlacing:!1}})}},h=function(e){e.preventDefault(),O(),console.log("Dispatching"),s({type:"TOGGLE_DIR"}),u()};return!0===c&&l!==D&&l!==z?Object(p.jsx)("div",{className:"".concat(_.a.tile," ").concat(H[C]),onContextMenu:h,onMouseLeave:O,onMouseOver:u,onClick:y,id:"".concat(a),style:{width:"".concat(100/r,"%"),height:"".concat(100/r,"%")}}):Object(p.jsx)("div",{className:"".concat(_.a.tile," ").concat(H[l]),onContextMenu:h,onMouseLeave:O,onMouseOver:u,onClick:y,id:"".concat(a),style:{width:"".concat(100/r,"%"),height:"".concat(100/r,"%")}})},k=function(e,a,t,r){for(var n=e;n<e+a*t;n+=a)if("B"===r[n])return!1;return!0},V=function(e){return 0===e.filter((function(e){return"B"===e})).length},B=function(e){var a=e.playerID,t=e.boardNum,r=e.type,n=e.oppType,c=Object(j.c)(),d=Object(j.d)((function(e){return Array.from(e.boards[t].keys())}),j.b),i=Object(j.d)((function(e){return e.boards[t+"Hidden"]})),l=Object(j.d)((function(e){return e.players[a]})),s=Object(j.d)((function(e){return e.boards.boardSize}));return console.log("Rendering"+t),Object(o.useEffect)((function(){"computer"===r&&l===f&&(c({type:"PLACE_RANDOM",payload:{board:t,player:a}}),c({type:"TOGGLE_BOARD_VIS",payload:{board:t}}),c({type:"CHANGE_PLAYER_STATE",payload:{player:a,state:S}}))}),[l]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:u.a["board-container"],children:d.map((function(e){return Object(p.jsx)(w,{oppType:n,type:r,hidden:i,player:a,playerState:l,boardSize:s,boardNum:t,tileIndex:e},e)}))})})},F=t(8),J=t.n(F),Y=(n={},Object(O.a)(n,v,"Please Place Your Ships\nRight click to Rotate"),Object(O.a)(n,T,"Player 1 is Attacking"),Object(O.a)(n,N,"Player 2 is Attacking"),Object(O.a)(n,G,"Player 1 Won"),Object(O.a)(n,I,"Player 2 Won"),n),U=function(){var e=Object(j.d)((function(e){return e.players.gameStatus})),a=Object(j.c)();return Object(p.jsxs)("div",{className:J.a["status-contaienr"],children:[Object(p.jsx)("span",{className:J.a["game-status"],children:Y[e]}),(e===G||e===I)&&Object(p.jsx)("button",{className:J.a["reset-button"],onClick:function(){a({type:"RESET_GAME"})},children:"New Game"})]})},W=t(6),X=t.n(W),Z=function(){return Object(p.jsxs)("div",{className:X.a["legend-container"],children:[Object(p.jsxs)("div",{className:X.a["legend-entry"],children:[Object(p.jsx)("div",{className:"".concat(X.a["legend-tile"]," ").concat(_.a.tile," ").concat(_.a["tile-hidden-free"]),id:"legend"}),Object(p.jsx)("span",{className:X.a["legend-text"],children:"Hidden Tile"})]}),Object(p.jsxs)("div",{className:X.a["legend-entry"],children:[Object(p.jsx)("div",{className:"".concat(X.a["legend-tile"]," ").concat(_.a.tile," ").concat(_.a["tile-revealed"]),id:"legend"}),Object(p.jsx)("span",{className:X.a["legend-text"],children:"Miss"})]}),Object(p.jsxs)("div",{className:X.a["legend-entry"],children:[Object(p.jsx)("div",{className:"".concat(X.a["legend-tile"]," ").concat(_.a.tile," ").concat(_.a["tile-hit"]),id:"legend"}),Object(p.jsx)("span",{className:X.a["legend-text"],children:"Hit"})]}),Object(p.jsx)(U,{})]})},q=t(16),K=t.n(q),Q=function(){return Object(p.jsxs)("div",{className:K.a["gameboard-container"],children:[Object(p.jsx)(B,{playerID:"player1",boardNum:"board1",oppType:"computer"}),Object(p.jsx)(Z,{}),Object(p.jsx)(B,{playerID:"player2",oppType:"player",type:"computer",boardNum:"board2"})]})},$=function(){return Object(p.jsx)(Q,{})};t(27);var ee=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(b,{}),Object(p.jsx)($,{})]})},ae=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,29)).then((function(a){var t=a.getCLS,r=a.getFID,n=a.getFCP,o=a.getLCP,c=a.getTTFB;t(e),r(e),n(e),o(e),c(e)}))},te=t(13),re=t(12),ne={board1:Array(64).fill(C),board2:Array(64).fill(C),boardSize:8,shipDir:8,shipArray:[{id:"C",length:5},{id:"B",length:4},{id:"D",length:3},{id:"S",length:3},{id:"P",length:2}],board1ShipIndex:0,board2ShipIndex:0,board1Hidden:!1,board2Hidden:!1},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CHANGE_TILE":return e[a.payload.board][a.payload.index]===a.payload.tileContent?e:Object(g.a)(Object(g.a)({},e),{},Object(O.a)({},a.payload.board,e[a.payload.board].map((function(e,t){return t===a.payload.index?a.payload.tileContent:e}))));case"CHANGE_SIZE":return e.boardSize===a.payload.size?e:Object(g.a)(Object(g.a)({},e),{},{board1:Array(a.payload.size*a.payload.size).fill(0),board2:Array(a.payload.size*a.payload.size).fill(0),boardSize:a.payload.size});case"CHANGE_ADJ_TILES":var t=e.shipDir,r=parseInt(a.payload.index/e.boardSize),n=parseInt((a.payload.index+t*(a.payload.length-1))/e.boardSize);if(a.payload.index+t*(a.payload.length-1)>=e[a.payload.board].length)return e;if(1===t&&r!==n)return e;for(var o,c=Object(re.a)(e[a.payload.board]),d=a.payload.index;d<a.payload.index+t*a.payload.length;d+=t)c[d]=a.payload.tileContent;return a.payload.isPlacing?Object(g.a)(Object(g.a)({},e),{},(o={},Object(O.a)(o,a.payload.board,c),Object(O.a)(o,a.payload.board+"ShipIndex",e[a.payload.board+"ShipIndex"]+1),o)):Object(g.a)(Object(g.a)({},e),{},Object(O.a)({},a.payload.board,c));case"TOGGLE_DIR":return Object(g.a)(Object(g.a)({},e),{},{shipDir:1===e.shipDir?e.boardSize:1});case"REVEAL_TILE":return Object(g.a)(Object(g.a)({},e),{},Object(O.a)({},a.payload.board,e[a.payload.board].map((function(e,t){return t===a.payload.index?e===M?z:D:e}))));case"TOGGLE_BOARD_VIS":return Object(g.a)(Object(g.a)({},e),{},Object(O.a)({},a.payload.board+"Hidden",!0!==e[a.payload.board+"Hidden"]));case"PLACE_RANDOM":for(var i=Object(re.a)(e[a.payload.board]),l=e[a.payload.board+"ShipIndex"];l<e.shipArray.length;){var s=e.shipArray[l].length,p=Math.floor(Math.random()*e.boardSize*e.boardSize),b=Math.floor(2*Math.random());if(b=1===b?e.boardSize:1,k(p,b,s,i)){var y=parseInt(p/e.boardSize),u=parseInt((p+b*(s-1))/e.boardSize);if(p+b*(s-1)>=e[a.payload.board].length)continue;if(1===b&&y!==u)continue;for(var j=p;j<p+b*s;j+=b)i[j]=M;l++}}return Object(g.a)(Object(g.a)({},e),{},Object(O.a)({},a.payload.board,i));case"RESET_GAME":return ne;default:return e}},ce=Object(te.a)({boards:oe,players:L}),de=Object(te.b)(ce,void 0,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());console.log(de.getState()),i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(j.a,{store:de,children:Object(p.jsx)(ee,{})})}),document.getElementById("root")),ae()}],[[28,1,2]]]);
//# sourceMappingURL=main.14a8bf5e.chunk.js.map